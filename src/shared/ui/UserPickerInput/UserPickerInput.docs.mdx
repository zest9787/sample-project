import { Meta, Canvas, Source, Controls, Description, Subtitle, ArgTypes } from "@storybook/addon-docs/blocks";
import * as Stories from "./UserPickerInput.stories";

<Meta of={Stories} name="Docs" />

# UserPickerInput

<Subtitle>사번/이름 + 검색 버튼 + 사용자 검색 모달(antd)</Subtitle>

<Description>
    사번/이름 입력 UI와 검색 버튼을 하나로 묶은 공통 컴포넌트입니다.
    검색 버튼 클릭 → Modal에서 사용자 검색/선택 → 사번/이름 값을 자동으로 세팅합니다.

    - UI: antd (Input, Button, Modal, Table)
    - 데이터: <code>searchUsers(keyword)</code> 함수 주입 (API/Mock 분리)
</Description>

---

[//]: # ()
[//]: # (## Quick Start)

[//]: # ()
[//]: # (<Source)

[//]: # (    language="tsx")

[//]: # (    code={`import React from "react";)

[//]: # (import { UserPickerInput } from "@/shared/ui/UserPickerInput";)

[//]: # (import type { User } from "@/entities/user/model/types";)

[//]: # ()
[//]: # (const searchUsers = async &#40;keyword: string&#41;: Promise<User[]> => {)

[//]: # (  const res = await fetch&#40;\`/api/users?keyword=\${encodeURIComponent&#40;keyword&#41;}\`&#41;;)

[//]: # (  if &#40;!res.ok&#41; throw new Error&#40;"검색 실패"&#41;;)

[//]: # (  return res.json&#40;&#41;;)

[//]: # (};)

[//]: # ()
[//]: # (    export function Example&#40;&#41; {)

[//]: # (      const [value, setValue] = React.useState&#40;{ empNo: "", name: "" }&#41;;)

[//]: # ()
[//]: # (      return &#40;)

[//]: # (        <UserPickerInput)

[//]: # (          value={value})

[//]: # (          onChange={setValue})

[//]: # (          searchUsers={searchUsers})

[//]: # (          showEmpNo={true})

[//]: # (        />)

[//]: # (      &#41;;)

[//]: # (    }`})

[//]: # (/>)

[//]: # ()
[//]: # (---)

## Playground (직접 테스트)

> 아래 Canvas는 **스토리 실행 + toolbar**를 제공하고, “코드 보기”도 함께 사용할 수 있습니다.
> 또한 아래에 <code>&lt;Source /&gt;</code> 블록으로 스토리 소스도 명시적으로 노출합니다.

### Default

<Canvas of={Stories.Default} />

[//]: # (<Source of={Stories.Default} />)

---

### 사번 입력 숨김(showEmpNo=false)

<Canvas of={Stories.WithoutEmpNo} />

<Source of={Stories.WithoutEmpNo} />

---

### 초기값 있음

<Canvas of={Stories.Prefilled} />

<Source of={Stories.Prefilled} />

---

### Disabled

<Canvas of={Stories.Disabled} />

<Source of={Stories.Disabled} />

---

### 검색 에러 시나리오

<Canvas of={Stories.SearchError} />

<Source of={Stories.SearchError} />

---

## Props / Controls

[//]: # (<ArgsTable of={Stories.Default} />)
[//]: # (## Props &#40;Static&#41;)

[//]: # (<ArgTypes of={Stories.Default} />)

<Controls of={Stories.Default} />